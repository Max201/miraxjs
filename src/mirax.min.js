var Mirax=function(){var a=this;this.PluginManager=function(a){this.mx=a,this.load=function(a,b){b.constructor.name=a,this.mx.__defineGetter__(a,b)}},this.plugin=new this.PluginManager(this),this.done=function(a){this.evt("domloaded").handle(a)},document.addEventListener("DOMContentLoaded",function(b){a.evt("domloaded").trigger(b)}),(window.onpopstate=function(){var b,c=/\+/g,d=/([^&=]+)=?([^&]*)/g,e=function(a){return decodeURIComponent(a.replace(c," "))},f=window.location.search.substring(1);for(a._request_parameters={};b=d.exec(f);)a._request_parameters[e(b[1])]=e(b[2])})()};window.mx=new Mirax,mx.plugin.load("rstr",function(){var a=function(a,b){for(var c=b||"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz~!@#$%^&*()-+|;:",d=a||8,e="",f=0;f<d;f++){var g=Math.floor(Math.random()*c.length);e+=c.substring(g,g+1)}return e};return function(b,c){return a(b,c)}}),mx.plugin.load("req",function(){var a=function(a,b){return"undefined"!=typeof a&&a?"undefined"!=typeof mx._request_parameters[a]&&mx._request_parameters[a]?mx._request_parameters[a]:b||null:mx._request_parameters};return function(b,c){return a(b,c)}}),mx.plugin.load("query",function(){var a=function(a){a=mx.set(a,mx.req());var c,b=[];for(c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")};return function(b){return a(b)}}),mx.plugin.load("go",function(){var a=function(a,b){var c=a||document.location.href;b=b||0,b>0?setTimeout(function(){document.location.href=c},1e3*b):document.location.href=c};return function(b,c){return a(b,c)}}),mx.plugin.load("translit",function(){var a=function(a){var b=function(){var b=1,c=Math.abs(b);return b===c?(a=a.replace(/(\u0456(?=.[^\u0430\u0435\u0438\u043E\u0443\u044A\s]+))/gi,"$1`"),[function(a,b){var f;(f=a[0]||a[c])&&(e[b]=f,d.push(b))},function(a){return a.replace(/i``/gi,"i`").replace(/((c)z)(?=[ieyj])/gi,"$2")}]):(a=a.replace(/(c)(?=[ieyj])/gi,"$1z"),[function(a,b){var f;(f=a[0]||a[c])&&(e[f]=b,d.push(f))},function(a){return a}])}(),c={"щ":["","ŝ","","sth","","shh","shh"],"я":["","â","ya","ya","","ya","ya"],"є":["","ê","","","","","ye"],"ѣ":["","ě","","ye","","ye",""],"і":["","ì","i","i","","i","i"],"ї":["","ï","","","","","yi"],"ё":["","ë","yo","","","yo",""],"ю":["","û","yu","yu","","yu","yu"],"ж":["zh","ž"],"ч":["ch","č"],"ш":["sh","š"],"ѳ":["","f̀","","fh","","fh",""],"џ":["","d̂","","","dh","",""],"ґ":["","g̀","","","","","g"],"ѓ":["","g","","","g","",""],"ѕ":["","s","","","z","",""],"ќ":["","k","","","k","",""],"љ":["","l","","","l","",""],"њ":["","n","","","n","",""],"э":["","è","e","","","e",""],"ъ":["","ʺ","","","","",""],"ы":["","y","y","","","y",""],"ў":["","ǔ","u","","","",""],"ѫ":["","ǎ","","o","","",""],"ѵ":["","ỳ","","yh","","yh",""],"ц":["cz","c"],"а":["a"],"б":["b"],"в":["v"],"г":["g"],"д":["d"],"е":["e"],"з":["z"],"и":["","i","","i","i","i","y"],"й":["","j","j","j","","j","j"],"к":["k"],"л":["l"],"м":["m"],"н":["n"],"о":["o"],"п":["p"],"р":["r"],"с":["s"],"т":["t"],"у":["u"],"ф":["f"],"х":["x","h"],"ь":["'","","","","","",""],"ј":["","j","","","j","",""],"’":["",""],"№":["#"]},d=[],e={};for(var f in c)b[0](c[f],f);return b[1](a.replace(new RegExp(d.join("|"),"gi"),function(a){return a.toLowerCase()===a?e[a]:e[a.toLowerCase()].toUpperCase()}))};return function(b){return a(b)}}),mx.plugin.load("slug",function(){var a=function(a){var b=a.toLowerCase().trim();return mx.translit(b).replace(/\s+/g,"_").replace(/[^a-z0-9\-_]+/g,"")};return function(b){return a(b)}}),mx.plugin.load("type",function(){var a=function(a){this.var=a,this.type=typeof a,"undefined"==this.type?this.class="undefined":null==this.var?this.class="null":this.class="undefined"!=typeof a.constructor?a.constructor.name:this.type};return a.prototype.isDict=function(){return"object"==this.type&&"undefined"==typeof this.type.pop},a.prototype.isList=function(){return"object"==this.type&&"undefined"!=typeof this.type.pop},a.prototype.isString=function(){return"string"==this.type},a.prototype.isFunction=function(){return"function"==this.type},a.prototype.isDom=function(){return this.class.indexOf("HTML")>-1&&this.class.indexOf("Element")>-1||"Window"==this.class||"HTMLDocument"==this.class},a.prototype.isDomList=function(){return this.isList()&&mx.type(this.var[0]).isDom()},function(b){return new a(b)}}),mx.plugin.load("route",function(){var a=this,b=function(b){this.route=b;var c=this;"undefined"==typeof a._routing_init&&(a._routing_init=!0,a._route_map={},a.dom(window).on("hashchange",function(){var b,e,d=c.location();for(b in a._route_map)if(b==d){e=a._route_map[b];break}a.http(e)})),this.request={url:"",method:"GET",data:{}}};return b.prototype.location=function(){var a=window.location.hash;return a.indexOf("#!")>-1&&(a=a.substr(2)),a.indexOf("#")>-1&&(a=a.substr(1)),a},b.prototype.src=function(a,b){return this.request.url=a,this.request.data=b||{},this},b.prototype.srcPost=function(a,b){return this.src(a,b),this.request.method="POST",this},b.prototype.final=function(b,c){var d=this;this.request.callback=function(e){var f=e,g=a.dom(b);a.type(c).isFunction()&&(f=c(e,d.request)),g.content(f)},a._route_map[this.route]=this.request},function(a){return new b(a)}}),mx.plugin.load("evt",function(){var a=this,b=function(b){b=b?b.trim().toLowerCase():"","undefined"==typeof a._evt&&(a._evt={}),"undefined"==typeof a._evt[b]&&(a._evt[b]=[]),this.event=b};return b.prototype.handle=function(b){"function"==typeof b&&a._evt[this.event].push(b)},b.prototype.trigger=function(b){var c;for(c=0;c<a._evt[this.event].length;c++){var d=a._evt[this.event][c];d(b)}},function(a){return new b(a)}}),mx.plugin.load("set",function(){return function(a,b){var c;if(b=b||{},"undefined"!=typeof a){for(c in b)a.hasOwnProperty(c)||(a[c]=b[c]);return a}return b}}),mx.plugin.load("func",function(){return function(a,b){return"function"==typeof a?a:("function"!=typeof b&&(b=function(){}),b)}}),mx.plugin.load("http",function(){var a=this,b=function(b,c){return this.conf={url:null,method:"GET",type:"html",headers:{"Content-Type":this.type("html")},callback:function(a,b){},change:function(a,b){},before:function(a){},after:function(a,b){},update:function(a,b){}},"string"==typeof b?(this.conf=a.set({url:b,callback:a.func(c)},this.conf),void this.request()):void("object"==typeof b&&(this.conf=a.set(b,this.conf),this.request()))};return b.prototype.query=function(a){var c,b=[];for(c in a)b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")},b.prototype.form=function(a){var b,c=new FormData;for(b in a)c.append(b,a[b]);return c},b.prototype.process_data=function(b){return"string"==typeof b?a.dom(b).form():b},b.prototype.type=function(a){var b={json:"application/json",html:"text/html",text:"text/plain",css:"text/stylesheet",js:"text/javascript"};return b[a.toLowerCase()]},b.prototype.decode=function(a,b){var c={json:JSON.parse};return b.hasOwnProperty(b.toLowerCase())?c[b.toLowerCase()](a):a},b.prototype.extends_get=function(b,c){var e,f,d={};if(!b)return c||{};if(b=b.split("?"),1==b.length)return c;for(b=b[1].split("&"),e=0;e<b.length;e++)f=b[e].split("="),d[f[0]]=null,f.length>1&&(d[f[0]]=f[1]);return a.set(c,d)},b.prototype.request=function(){var c,b=new XMLHttpRequest,d=this;if(this.conf.data=this.process_data(this.conf.data),b.onreadystatechange=function(){var c="undefined"!=typeof b.responseText?d.decode(b.responseText,b.responseType):null;4==b.readyState&&200==b.status?a.func(d.conf.after)(c,b):a.func(d.conf.update)(c,b)},b.onload=function(){var c="undefined"!=typeof this.responseText?d.decode(this.responseText,this.responseType):null;a.func(d.conf.callback)(c,b)},this.conf.method=this.conf.method.trim().toUpperCase(),"GET"==this.conf.method){var e=this.query(this.extends_get(this.conf.url,this.conf.data));this.conf.url=this.conf.url.split("?")[0],b.open(this.conf.method,this.conf.url+(e.length?"?"+e:""))}else b.open(this.conf.method,this.conf.url,!0);for(c in this.conf.headers)b.setRequestHeader(c,this.conf.headers[c]);a.func(this.conf.before)(b),"GET"==this.conf.method?b.send():(b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.send(this.form(this.conf.data)))},function(a,c){return new b(a,c)}}),mx.plugin.load("dom",function(){var a=function(a){if(!mx.type(a).isDom())throw new TypeError("Wrong input type");this.element=a,this.value=null,this.name=a&&"undefined"!=typeof this.element.getAttribute?a.getAttribute("name"):null,this.method=method=this.element.tagName.toLowerCase(),"undefined"!=typeof this[this.method]&&(this.value=this[this.method]())};a.prototype.set=function(a){return"undefined"!=typeof this[this.method]&&this[this.method](a),this},a.prototype.select=function(a){var b,c=this.element.querySelectorAll("option"),d=null;if("undefined"==a){for(b=0;b<c.length;b++)c[b].selected&&(d=c[b].value);return d}for(b=0;b<c.length;b++)c[b].value==a?(c[b].selected=!0,c[b].setAttribute("selected","selected")):(c[b].selected=!1,c[b].removeAttribute("selected"));return this},a.prototype.button=function(a){return"undefined"==typeof a?this.element.value:(this.element.value=a,this)},a.prototype.input=function(a){var b,c;if("undefined"==typeof a)switch(this.element.type){case"checkbox":return b=this.element.hasAttribute("data-default")?this.element.getAttribute("data-default"):"",this.element.checked?this.element.value:b;case"radio":return c=null,this.name?mx.dom('[name="'+this.name+'"][type="radio"]').each(function(a){a.checked&&(c=a.value)}):c=this.element.value,c;default:return this.element.value}else switch(this.element.type){case"checkbox":"undefined"!=typeof a&&a?(this.element.checked=!0,this.element.setAttribute("checked","checked")):(this.element.checked=!1,this.element.removeAttribute("checked"));break;case"radio":var d=mx.dom('[type="radio"][name="'+this.name+'"]');d.each(function(b){return b.value==a?(b.checked=!0,b.setAttribute("checked","checked")):(b.checked=!1,b.removeAttribute("checked")),console.log(b.value),b});break;default:this.element.value=a}return this},a.prototype.textarea=function(a){return"undefined"==typeof a?this.element.textContent:(this.element.textContent=a,this)};var b=function(a){var b=mx.type(a);if(b.isDom())this.elements=[a];else if(b.isString())this.elements=document.querySelectorAll(a);else{if(!b.isList()&&!b.isDict())throw new TypeError("Wrong DOM-Selection");this.elements=a}};return b.prototype.each=function(a){var b;for(b=0;b<this.elements.length;b++)this.elements[b]=mx.func(a)(this.elements[b]);return this},b.prototype.remove=function(){return this.each(function(a){a.parentNode.removeChild(a)}),this},b.prototype.css=function(a,b){var c={};return"undefined"!=typeof b?c[a]=b:c=a,this.each(function(a){var b;for(b in c)a.style.hasOwnProperty(b)&&(a.style[b]=c[b]);return a}),this},b.prototype.content=function(a){if("undefined"==typeof a||!a){var a=new Array;return this.each(function(b){return a.push(b.innerHTML),b}),a}return this.each(function(b){return b.innerHTML=a,b}),this},b.prototype.html=function(a){if("undefined"==typeof a||!a){var a=new Array;return this.each(function(b){return a.push(b.outerHTML),b}),a}return this.each(function(b){return b.outerHTML=a,b}),this},b.prototype.text=function(a){if("undefined"==typeof a||!a){var a=new Array;return this.each(function(b){return a.push(b.textContent),b}),a}return this.each(function(b){return b.textContent=a,b}),this},b.prototype.child=function(a){var b=[];return this.each(function(c){var d,e=c.querySelectorAll(a);for(d=0;d<e.length;d++)b.push(e[d]);return c}),mx.dom(b)},b.prototype.attr=function(a,b){if("undefined"==typeof b){var c=[];return this.each(function(b){return b.hasAttribute(a)?c.push(b.getAttribute(a)):c.push(null),b}),1==c.length?c[0]:c}this.each(function(c){return c.hasAttribute(a)&&c.setAttribute(a,b),c})},b.prototype.val=function(b){if("undefined"!=typeof this.elements[0]&&"FORM"==this.elements[0].tagName)return mx.dom(this.elements[0].querySelectorAll("input, select, button, textarea")).val(b);var c=[];return this.each(function(d){var e=new a(d);return"undefined"==typeof b?c.push(e.value):e.set(b),d}),"undefined"!=typeof b?(this.trigger("input"),this.trigger("change"),this):1==c.length?c[0]:c},b.prototype.form=function(b){if("undefined"!=typeof this.elements[0]&&"FORM"==this.elements[0].tagName)return mx.dom(this.elements[0].querySelectorAll("input, select, button, textarea")).form(b);var c={};return this.each(function(d){var e=new a(d);e.name&&("undefined"!=typeof b&&"undefined"!=typeof b[e.name]?e.set(b[e.name]):c[e.name]=e.value)}),"undefined"==typeof b?c:this},b.prototype.hide=function(){return this.css("display","none"),this},b.prototype.show=function(a){return this.css("display",a||"block"),this},b.prototype.on=function(a,b){return this.each(function(c){c.addEventListener(a,b)}),this},b.prototype.trigger=function(a){var b=this;return this.each(function(c){b.triggerEvent(a,c)}),this},b.prototype.triggerEvent=function(a,b){var c;if(b.ownerDocument)c=b.ownerDocument;else{if(9!=b.nodeType)throw new Error("Invalid node passed to fireEvent: "+b.id);c=b}var d;if(b.dispatchEvent){var e="";switch(a){case"hashchange":e="HashChangeEvent";break;case"click":case"mousedown":case"mouseup":case"mouseenter":case"mouseover":case"mouseleave":case"mousemove":e="MouseEvents";break;case"focus":case"change":case"blur":case"select":e="HTMLEvents";break;default:e="UIEvent"}d=c.createEvent(e),d.initEvent(a,!0,!0),d.synthetic=!0,b.dispatchEvent(d,!0)}else b.fireEvent&&(d=c.createEventObject(),d.synthetic=!0,b.dispatchEvent("on"+a,!0));return this},function(a){return new b(a)}}),mx.plugin.load("storage",function(){function a(){return window.hasOwnProperty("localStorage")}function b(){return window.hasOwnProperty("sessionStorage")}var c={available:a,get:function(b,c){return a()||console.warn("Local storage is not supports"),localStorage.hasOwnProperty(b)&&localStorage.getItem(b)?localStorage.getItem(b):c||null},set:function(b,c){a()||console.warn("Local storage is not supports"),localStorage.setItem(b,c)},keys:function(){return a()||console.warn("Local storage is not supports"),Object.keys(localStorage)},remove:function(b){return a()||console.warn("Local storage is not supports"),!(!localStorage.hasOwnProperty(b)||!localStorage.getItem(b))&&(localStorage.removeItem(b),!0)},contains:function(b){return a()||console.warn("Local storage is not supports"),localStorage.hasOwnProperty(b)}},d={available:b,get:function(a,c){return b()||console.warn("Session storage is not supports"),sessionStorage.hasOwnProperty(a)&&sessionStorage.getItem(a)?sessionStorage.getItem(a):c||null},set:function(a,c){b()||console.warn("Session storage is not supports"),sessionStorage.setItem(a,c)},keys:function(){return b()||console.warn("Session storage is not supports"),Object.keys(sessionStorage)},remove:function(a){return b()||console.warn("Session storage is not supports"),!(!sessionStorage.hasOwnProperty(a)||!sessionStorage.getItem(a))&&(sessionStorage.removeItem(a),!0)},contains:function(a){return b()||console.warn("Session storage is not supports"),sessionStorage.hasOwnProperty(a)}},e={set:function(a,b,c,d){var e=new Date;e.setTime(e.getTime()+24*(c||1)*60*60*1e3);var f="expires="+e.toUTCString();document.cookie=a+"="+b+";"+f+";path="+(d||"/")},get:function(a,b){for(var c=a+"=",d=document.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1);if(0==f.indexOf(c))return f.substring(c.length,f.length)}return b||null},contains:function(a){return document.cookie.indexOf(a+"=")>=0},keys:function(){for(var a=document.cookie.split(";"),b=[],c=0;c<a.length;c++)b.push(a[c].split("=")[0].trim());return b},remove:function(a){if(document.cookie.indexOf(a+"=")==-1)return!1;var b=new Date;b.setTime(b.getTime()-864e5);var c="expires="+b.toUTCString();document.cookie=a+"=;"+c+";path=/"}};return{local:c,session:d,cookie:e}});